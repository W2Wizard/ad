class l{state=0;userSequence=[];desiredSequence=[];previewIntervalID=null;previewTimeout=null;CARDS;playButton;applyButton;constructor(){this.CARDS=document.querySelectorAll(".card"),this.playButton=document.querySelector(".action-button:not(.apply)"),this.applyButton=document.querySelector(".action-button.apply"),this.applyButton.style.display="none",this.CARDS.forEach((s,t)=>{s.addEventListener("click",()=>this.handleCardClick(t))}),this.playButton.addEventListener("click",()=>this.startGame()),this.applyButton.addEventListener("click",()=>{window.open("https://codam.nl/apply","_blank")}),this.startIdleAnimation(),setTimeout(()=>this.stopIdleAnimation(),30000)}startIdleAnimation(){this.generateSequence(),this.previewSequence(),this.previewIntervalID=window.setInterval(()=>{this.generateSequence(),this.previewSequence()},5000)}stopIdleAnimation(){if(this.previewIntervalID!==null)clearInterval(this.previewIntervalID),this.previewIntervalID=null;if(this.previewTimeout!==null)clearTimeout(this.previewTimeout),this.previewTimeout=null}generateSequence(){let s=Math.floor(Math.random()*2)+1;this.desiredSequence=Array.from({length:s},()=>Math.floor(Math.random()*this.CARDS.length))}previewSequence(){this.resetCards(),this.desiredSequence.forEach((s,t)=>{this.previewTimeout=window.setTimeout(()=>{this.highlightCard(s),setTimeout(()=>this.unhighlightCard(s),500)},t*800)})}highlightCard(s){let t=this.CARDS[s];t.classList.add("highlight"),t.querySelector(".card-back")?.classList.add("highlight")}unhighlightCard(s){let t=this.CARDS[s];t.classList.remove("highlight"),t.querySelector(".card-back")?.classList.remove("highlight")}resetCards(){this.CARDS.forEach((s)=>{s.classList.remove("highlight","error"),s.querySelector(".card-back")?.classList.remove("highlight")})}startGame(){this.stopIdleAnimation(),this.state=1,this.userSequence=[],this.generateSequence(),this.previewSequence();let s=this.desiredSequence.length*800+500;setTimeout(()=>this.state=2,s)}handleCardClick(s){if(this.state!==2)return;this.highlightCard(s),setTimeout(()=>this.unhighlightCard(s),500),this.userSequence.push(s);let t=this.userSequence.length-1;if(s!==this.desiredSequence[t]){this.handleFailure();return}if(this.userSequence.length===this.desiredSequence.length)this.handleSuccess()}handleFailure(){this.state=4,this.CARDS.forEach((s)=>s.classList.add("error")),this.playButton.style.display="block",this.applyButton.style.display="none",this.playButton.classList.add("attention"),setTimeout(()=>this.playButton.classList.remove("attention"),1500)}handleSuccess(){this.state=3,this.playButton.style.display="none",this.applyButton.style.display="block",this.applyButton.textContent="Apply to codam now!",this.CARDS.forEach((s)=>s.classList.add("winner"))}}window.addEventListener("DOMContentLoaded",()=>new l);
